{"ast":null,"code":"import _objectSpread from\"/Users/sean/Desktop/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/sean/Desktop/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sean/Desktop/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sean/Desktop/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();// eslint-disable-next-line\n},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(id,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/\".concat(id,\"/update\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(id,\"/delete\"),{method:\"DELETE\",headers:{'Content-Type':'application/json'}});navigate('/');case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteNote(){return _ref3.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/create\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});navigate('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function createNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(id!=='new'&&note.body===''){deleteNote();}else if(id!=='new'){updateNote();}else if(id==='new'&&note!==null){createNote();}navigate('/');};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"DELETE\"}):/*#__PURE__*/_jsx(\"button\",{onClick:createNote,children:\"DONE\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","NotePage","navigate","id","note","setNote","getNote","fetch","response","json","data","updateNote","method","headers","body","JSON","stringify","deleteNote","createNote","handleSubmit","handleChange","value","e","target"],"sources":["/Users/sean/Desktop/myNotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\n\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n\nconst NotePage = () => {\n    const navigate = useNavigate()\n    const { id } = useParams()\n    const [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()\n    // eslint-disable-next-line\n    },[id])\n\n    const getNote = async () => {\n        if (id === 'new') return\n        let response = await fetch(`/api/notes/${id}/`)\n        let data = await response.json()\n        setNote(data)\n    }\n\n    const updateNote = async () => {\n        fetch(`/api/notes/${id}/update`, {\n            method: \"PUT\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body:JSON.stringify(note)\n        })\n    }\n\n    const deleteNote = async () => {\n        fetch(`/api/notes/${id}/delete`,{\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        navigate('/')\n    }\n\n    const createNote = async () => {\n        fetch(`/api/notes/create`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body:JSON.stringify(note)\n        })\n        navigate('/')\n    }\n\n    const handleSubmit = () => {\n        if (id !== 'new' && note.body === ''){\n            deleteNote()\n        } else if (id !== 'new') {\n            updateNote()\n        } else if (id === 'new' && note !== null) {\n            createNote()\n        }\n        \n        navigate('/')\n    }\n\n    const handleChange = (value) => {\n        setNote((note) => ({ ...note, 'body':value }))\n    }\n\n    return (\n        <div className=\"note\">\n            <div className=\"note-header\">\n                <h3>\n                    <ArrowLeft onClick={handleSubmit}/>\n                </h3>\n                {id !== 'new' ? (\n                    <button onClick={deleteNote}>DELETE</button>\n                ) : (\n                    <button onClick={createNote}>DONE</button>\n                )}\n            </div>\n            <textarea onChange={(e) => {handleChange(e.target.value)}} value={note?.body}></textarea>\n        </div>\n    )\n}\n\nexport default NotePage"],"mappings":"ufAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,CAEA,OAASC,cAAc,GAAIC,UAA3B,KAA4C,0BAA5C,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACnB,GAAMC,SAAQ,CAAGJ,WAAW,EAA5B,CACA,eAAeD,SAAS,EAAxB,CAAQM,EAAR,YAAQA,EAAR,CACA,cAAwBR,QAAQ,CAAC,IAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eAEAT,SAAS,CAAC,UAAM,CACZU,OAAO,GACX;AACC,CAHQ,CAGP,CAACH,EAAD,CAHO,CAAT,CAKA,GAAMG,QAAO,4FAAG,4JACRH,EAAE,GAAK,KADC,wFAESI,MAAK,sBAAeJ,EAAf,MAFd,QAERK,QAFQ,qCAGKA,SAAQ,CAACC,IAAT,EAHL,QAGRC,IAHQ,eAIZL,OAAO,CAACK,IAAD,CAAP,CAJY,sDAAH,kBAAPJ,QAAO,0CAAb,CAOA,GAAMK,WAAU,6FAAG,0IACfJ,KAAK,sBAAeJ,EAAf,YAA4B,CAC7BS,MAAM,CAAE,KADqB,CAE7BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFoB,CAK7BC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALwB,CAA5B,CAAL,CADe,wDAAH,kBAAVO,WAAU,2CAAhB,CAUA,GAAMM,WAAU,6FAAG,0IACfV,KAAK,sBAAeJ,EAAf,YAA2B,CAC5BS,MAAM,CAAE,QADoB,CAE5BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFmB,CAA3B,CAAL,CAMAX,QAAQ,CAAC,GAAD,CAAR,CAPe,wDAAH,kBAAVe,WAAU,2CAAhB,CAUA,GAAMC,WAAU,6FAAG,0IACfX,KAAK,qBAAsB,CACvBK,MAAM,CAAE,MADe,CAEvBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFc,CAKvBC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CALkB,CAAtB,CAAL,CAOAF,QAAQ,CAAC,GAAD,CAAR,CARe,wDAAH,kBAAVgB,WAAU,2CAAhB,CAWA,GAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvB,GAAIhB,EAAE,GAAK,KAAP,EAAgBC,IAAI,CAACU,IAAL,GAAc,EAAlC,CAAqC,CACjCG,UAAU,GACb,CAFD,IAEO,IAAId,EAAE,GAAK,KAAX,CAAkB,CACrBQ,UAAU,GACb,CAFM,IAEA,IAAIR,EAAE,GAAK,KAAP,EAAgBC,IAAI,GAAK,IAA7B,CAAmC,CACtCc,UAAU,GACb,CAEDhB,QAAQ,CAAC,GAAD,CAAR,CACH,CAVD,CAYA,GAAMkB,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC5BhB,OAAO,CAAC,SAACD,IAAD,wCAAgBA,IAAhB,MAAsB,OAAOiB,KAA7B,IAAD,CAAP,CACH,CAFD,CAIA,mBACI,aAAK,SAAS,CAAC,MAAf,wBACI,aAAK,SAAS,CAAC,aAAf,wBACI,iCACI,KAAC,SAAD,EAAW,OAAO,CAAEF,YAApB,EADJ,EADJ,CAIKhB,EAAE,GAAK,KAAP,cACG,eAAQ,OAAO,CAAEc,UAAjB,oBADH,cAGG,eAAQ,OAAO,CAAEC,UAAjB,kBAPR,GADJ,cAWI,iBAAU,QAAQ,CAAE,kBAACI,CAAD,CAAO,CAACF,YAAY,CAACE,CAAC,CAACC,MAAF,CAASF,KAAV,CAAZ,CAA6B,CAAzD,CAA2D,KAAK,CAAEjB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEU,IAAxE,EAXJ,GADJ,CAeH,CA/ED,CAiFA,cAAeb,SAAf"},"metadata":{},"sourceType":"module"}